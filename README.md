# DEV-GRAFT Cinema

DEV-GRAFT가 영화관 운영을 시작했습니다!  
그리고 우리 DG-MOVIE.Team은 영화관 서비스에 필요한 영화 예매 플랫폼을 개발해야합니다!

- [Event Storming](https://miro.com/app/embed/uXjVOx1AX14=/?pres=1&frameId=3458764553420482599&embedId=695691095149)

시나리오 개발에 참가하여 개발을 연습하고 싶다면 Projects > dg-cinema-scenario 를 확인해주세요.

상세문서는 제거할 예정입니다.
DDD를 기반으로 설계할 수 있도록 EventStorming만 제공할 예정입니다.

상세한 메커니즘은 시나리오 내에서 제공하지 않을 예정이며, 메커니즘 문서를 별도로 분리하여 제공할 예정입니다.

## Strategic Design
> 복잡한 도메인들의 역할과 관계를 정의하는 과정


### Event Storming
> 요구사항에 맞는 Command와 Event를 출현시키고 비슷한 관계가 있는 내용을 묶어 BoundedContext를 식별하는 과정

### Boris
> 각 BoundedContext간의 협력 관계를 식별하는 과정

### Snap-E
> 


## Tactical Design

## 🎭 시나리오

시나리오를 간략하게 설명하는 것으로 변경할 예정.

언어,아키텍쳐,프레임워크,인프라를 제한할 생각.
리뷰 목적, 시나리오 집중 등의 이유.

### Flow

![image](https://github.com/dev-graft-scenario/dg-cinema-scenario/assets/22608825/31cd6652-2a56-4049-b7be-5bfa6ac36bbf)

Flow Image 추가 예정

### 📚 전제 조건
- 테이블 및 기본데이터 .sql 파일로 제공하였습니다.
- 테이블 추가 및 변경이 가능합니다.

### ⛳ Goals
- ✅ 시나리오의 API를 구현합니다.
- ✅ 프로젝트 구조와 컨벤션을 고민하고 다른 참가자와 공유할 수 있도록 합니다.
- ✅ 결제 과정에 내가 선택한 좌석을 다른 사용자가 예매할 수 없도록 제한할 수 있어야합니다.
- ✅ 결제가 완료된 예매 정보를 예매율에 반영할 수 있어야합니다.
- ✅ 대규모 트래픽을 고려하여 예매율을 실시간으로 보여줄 수 있어야합니다.

### 예매 관련 정보

- 상영 직전까지(1분 전) 예매가 가능해야합니다.
- 조회시간 기준으로 상영된지 2시간이상 지난 예매 데이터를 실시간 집계하여 예매율 정보로 제공합니다.

```
예매율 산출기준 = A(예매관객수) / B(전체 예매 관객수) * 100
- 예매 관객수(A) : 조회 시점 특정 영화의 상영이 2시간이상 지난 발권 데이터
- 전체 예매 관객수 (B) 조회 시점 모든 영화의 상영이 2시간 이상 지난 발권 데이터
- 상영 시작시간을 기준으로 2시간 이내의 발권 데이터는 집계 대상에서 제외됩니다.
```


### 정책
**예매**
- ✅ 상영 일정 별로 금액이 다를 수 있습니다.
- ✅ 예매 시 N(1~4)개의 좌석을 선택할 수 있습니다.
- ✅ 예매 후 5분 이내에 결제가 진행되지 않을 경우 자동으로 취소됩니다.
- ✅ 예매된 상영일정의 좌석은 다른 사용자가 예매할 수 없습니다.
- ✅ 예매 취소 시 좌석의 부분 취소는 불가능합니다.

**결제**
- ✅ 상영 시간 10분 전까지 결제 취소가 가능합니다.
- ✅ 결제된 좌석의 부분 취소는 불가능합니다.
- ✅ 결제된 상영일정의 좌석은 다른 사용자가 예매할 수 없습니다.
